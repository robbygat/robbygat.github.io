<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimalist Poker</title>
    <style>
        :root {
            --primary-color: #2d3436;
            --secondary-color: #0984e3;
            --table-color: #10ac84;
            --text-color: #dfe6e9;
            --card-color: #ffffff;
            --button-color: #0984e3;
            --button-hover: #74b9ff;
            --chip-color: #fdcb6e;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--primary-color);
            color: var(--text-color);
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        
        .game-container {
            width: 90%;
            max-width: 1000px;
            height: 90vh;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            position: relative;
        }
        
        .table {
            width: 100%;
            height: 80%;
            background-color: var(--table-color);
            border-radius: 250px;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 50px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        
        .player-area, .ai-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            padding: 25px;
            margin: 15px 0;
            z-index: 1;
        }
        
        .community-cards {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
        }
        
        .card {
            width: 80px;
            height: 120px;
            background-color: var(--card-color);
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            box-shadow: 0 3px 8px rgba(0,0,0,0.3);
            position: relative;
            color: #000;
        }
        
        .card.red {
            color: #e74c3c;
        }
        
        .card-back {
            background-color: #3498db;
            background-image: linear-gradient(135deg, #3498db 25%, #2980b9 25%, #2980b9 50%, #3498db 50%, #3498db 75%, #2980b9 75%, #2980b9 100%);
            background-size: 20px 20px;
        }
        
        .suit {
            position: absolute;
            font-size: 14px;
        }
        
        .suit.top {
            top: 5px;
            left: 5px;
        }
        
        .suit.bottom {
            bottom: 5px;
            right: 5px;
            transform: rotate(180deg);
        }
        
        .hidden {
            display: none;
        }
        
        .player-cards, .ai-cards {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .player-info, .ai-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .chips {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .chip-icon {
            width: 20px;
            height: 20px;
            background-color: var(--chip-color);
            border-radius: 50%;
            border: 2px solid #f39c12;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        button {
            background-color: var(--button-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.2s;
        }
        
        button:hover {
            background-color: var(--button-hover);
        }
        
        button:disabled {
            background-color: #7f8c8d;
            cursor: not-allowed;
        }
        
        .bet-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        input[type="range"] {
            width: 150px;
        }
        
        .bet-amount {
            min-width: 60px;
            text-align: center;
        }
        
        .pot {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0,0,0,0.5);
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .message {
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0,0,0,0.7);
            padding: 15px 30px;
            border-radius: 10px;
            font-weight: bold;
            z-index: 10;
            text-align: center;
        }
        
        .player-bet, .ai-bet {
            display: flex;
            align-items: center;
            gap: 5px;
            background-color: rgba(0,0,0,0.5);
            padding: 5px 10px;
            border-radius: 15px;
        }

        .win-message {
            color: #f1c40f;
            font-size: 1.2em;
            margin-top: 10px;
        }
        
        .header {
            display: flex;
            width: 100%;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .game-title {
            font-size: 1.5em;
            font-weight: bold;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .dealer-button {
            width: 30px;
            height: 30px;
            background-color: white;
            border-radius: 50%;
            color: black;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 12px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .thinking {
            font-style: italic;
            color: #bdc3c7;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <div class="game-title">Minimalist Poker</div>
            <button id="new-hand-btn">New Hand</button>
        </div>
        
        <div class="table">
            <div class="ai-area">
                <div class="ai-cards">
                    <div class="card card-back"></div>
                    <div class="card card-back"></div>
                </div>
                <div class="ai-info">
                    <div class="name">AI Player</div>
                    <div class="chips">
                        <div class="chip-icon"></div>
                        <span id="ai-chips">1000</span>
                    </div>
                    <div id="ai-thinking" class="thinking hidden">Thinking...</div>
                </div>
                <div id="ai-bet" class="ai-bet hidden">
                    <div class="chip-icon"></div>
                    <span id="ai-bet-amount">0</span>
                </div>
            </div>
            
            <div class="community-cards" id="community">
                <!-- Community cards will be added here by JavaScript -->
            </div>
            
            <div class="pot hidden" id="pot-display">
                <div class="chip-icon"></div>
                <span id="pot">0</span>
            </div>
            
            <div class="player-area">
                <div id="player-bet" class="player-bet hidden">
                    <div class="chip-icon"></div>
                    <span id="player-bet-amount">0</span>
                </div>
                <div class="player-info">
                    <div class="name">You</div>
                    <div class="chips">
                        <div class="chip-icon"></div>
                        <span id="player-chips">1000</span>
                    </div>
                </div>
                <div class="player-cards" id="player-cards">
                    <!-- Player cards will be added here by JavaScript -->
                </div>
            </div>
        </div>
        
        <div class="controls">
            <div class="action-buttons">
                <button id="check-btn" disabled>Check</button>
                <button id="call-btn" disabled>Call</button>
                <button id="fold-btn" disabled>Fold</button>
            </div>
            <div class="bet-controls">
                <button id="bet-btn" disabled>Bet</button>
                <input type="range" id="bet-slider" min="1" max="1000" value="10">
                <div class="bet-amount" id="bet-amount">10</div>
            </div>
        </div>
        
        <div class="message hidden" id="message">
            <!-- Game messages will appear here -->
        </div>
    </div>

    <script>
        // Card definitions
        const SUITS = ['♠', '♥', '♣', '♦'];
        const VALUES = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
        const RED_SUITS = ['♥', '♦'];
        
        // Game state
        let deck = [];
        let playerCards = [];
        let aiCards = [];
        let communityCards = [];
        let playerChips = 1000;
        let aiChips = 1000;
        let pot = 0;
        let currentBet = 0;
        let playerBet = 0;
        let aiBet = 0;
        let gamePhase = 'INIT'; // INIT, PREFLOP, FLOP, TURN, RIVER, SHOWDOWN
        let playerTurn = true;
        let handInProgress = false;
        let dealerPosition = 'PLAYER'; // Alternates between 'PLAYER' and 'AI'
        
        // DOM Elements
        const playerCardsEl = document.getElementById('player-cards');
        const communityCardsEl = document.getElementById('community');
        const playerChipsEl = document.getElementById('player-chips');
        const aiChipsEl = document.getElementById('ai-chips');
        const potEl = document.getElementById('pot');
        const potDisplayEl = document.getElementById('pot-display');
        const messageEl = document.getElementById('message');
        const checkBtn = document.getElementById('check-btn');
        const callBtn = document.getElementById('call-btn');
        const betBtn = document.getElementById('bet-btn');
        const foldBtn = document.getElementById('fold-btn');
        const betSlider = document.getElementById('bet-slider');
        const betAmountEl = document.getElementById('bet-amount');
        const newHandBtn = document.getElementById('new-hand-btn');
        const playerBetEl = document.getElementById('player-bet');
        const playerBetAmountEl = document.getElementById('player-bet-amount');
        const aiBetEl = document.getElementById('ai-bet');
        const aiBetAmountEl = document.getElementById('ai-bet-amount');
        const aiThinkingEl = document.getElementById('ai-thinking');
        
        // Initialize game
        function initGame() {
            // Reset game elements
            playerCardsEl.innerHTML = '';
            communityCardsEl.innerHTML = '';
            messageEl.classList.add('hidden');
            potDisplayEl.classList.add('hidden');
            playerBetEl.classList.add('hidden');
            aiBetEl.classList.add('hidden');
            
            // Create a fresh deck and shuffle it
            createDeck();
            shuffleDeck();
            
            // Reset game state
            playerCards = [];
            aiCards = [];
            communityCards = [];
            pot = 0;
            currentBet = 0;
            playerBet = 0;
            aiBet = 0;
            potEl.textContent = pot;
            playerChipsEl.textContent = playerChips;
            aiChipsEl.textContent = aiChips;
            
            // Switch dealer position
            dealerPosition = dealerPosition === 'PLAYER' ? 'AI' : 'PLAYER';
            
            // Check if we can start a new hand
            if (playerChips <= 0 || aiChips <= 0) {
                showMessage(playerChips <= 0 ? 'Game over! You ran out of chips.' : 'Game over! AI ran out of chips.');
                return;
            }
            
            handInProgress = true;
            startNewHand();
        }
        
        // Create and shuffle a deck
        function createDeck() {
            deck = [];
            for (const suit of SUITS) {
                for (const value of VALUES) {
                    deck.push({ suit, value });
                }
            }
        }
        
        function shuffleDeck() {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
        }
        
        // Deal cards
        function dealPlayerCards() {
            playerCards = [deck.pop(), deck.pop()];
            renderPlayerCards();
        }
        
        function dealAICards() {
            aiCards = [deck.pop(), deck.pop()];
            // AI cards are face down until showdown
        }
        
        function dealCommunityCards(count) {
            for (let i = 0; i < count; i++) {
                communityCards.push(deck.pop());
            }
            renderCommunityCards();
        }
        
        // Render cards
        function renderPlayerCards() {
            playerCardsEl.innerHTML = '';
            playerCards.forEach(card => {
                const cardEl = createCardElement(card);
                playerCardsEl.appendChild(cardEl);
            });
        }
        
        function renderCommunityCards() {
            communityCardsEl.innerHTML = '';
            communityCards.forEach(card => {
                const cardEl = createCardElement(card);
                communityCardsEl.appendChild(cardEl);
            });
        }
        
        function createCardElement(card) {
            const cardEl = document.createElement('div');
            cardEl.className = `card ${RED_SUITS.includes(card.suit) ? 'red' : ''}`;
            
            const valueEl = document.createElement('div');
            valueEl.textContent = card.value;
            cardEl.appendChild(valueEl);
            
            const suitTopEl = document.createElement('div');
            suitTopEl.className = 'suit top';
            suitTopEl.textContent = card.suit;
            cardEl.appendChild(suitTopEl);
            
            const suitBottomEl = document.createElement('div');
            suitBottomEl.className = 'suit bottom';
            suitBottomEl.textContent = card.suit;
            cardEl.appendChild(suitBottomEl);
            
            return cardEl;
        }
        
        // Game flow
        function startNewHand() {
            gamePhase = 'PREFLOP';
            
            // Post blinds
            const smallBlind = 5;
            const bigBlind = 10;
            
            if (dealerPosition === 'PLAYER') {
                // Player is dealer, AI posts small blind
                placeBet('AI', smallBlind);
                placeBet('PLAYER', bigBlind);
                playerTurn = false; // AI acts first preflop
            } else {
                // AI is dealer, player posts small blind
                placeBet('PLAYER', smallBlind);
                placeBet('AI', bigBlind);
                playerTurn = true; // Player acts first preflop
            }
            
            currentBet = bigBlind;
            
            // Deal cards
            dealPlayerCards();
            dealAICards();
            
            // Update UI
            updateControls();
            potDisplayEl.classList.remove('hidden');
            
            if (!playerTurn) {
                // AI's turn
                setTimeout(aiAction, 1000);
            }
        }
        
        function placeBet(player, amount) {
            // Cap bet at player's chip stack
            let actualAmount;
            if (player === 'PLAYER') {
                actualAmount = Math.min(amount, playerChips);
                playerChips -= actualAmount;
                playerBet += actualAmount;
                playerChipsEl.textContent = playerChips;
                playerBetAmountEl.textContent = playerBet;
                playerBetEl.classList.remove('hidden');
            } else {
                actualAmount = Math.min(amount, aiChips);
                aiChips -= actualAmount;
                aiBet += actualAmount;
                aiChipsEl.textContent = aiChips;
                aiBetAmountEl.textContent = aiBet;
                aiBetEl.classList.remove('hidden');
            }
            
            pot += actualAmount;
            potEl.textContent = pot;
            
            return actualAmount;
        }
        
        function nextPhase() {
            // Reset bets for the next betting round
            playerBet = 0;
            aiBet = 0;
            playerBetEl.classList.add('hidden');
            aiBetEl.classList.add('hidden');
            currentBet = 0;
            
            switch (gamePhase) {
                case 'PREFLOP':
                    gamePhase = 'FLOP';
                    dealCommunityCards(3);
                    break;
                case 'FLOP':
                    gamePhase = 'TURN';
                    dealCommunityCards(1);
                    break;
                case 'TURN':
                    gamePhase = 'RIVER';
                    dealCommunityCards(1);
                    break;
                case 'RIVER':
                    gamePhase = 'SHOWDOWN';
                    showdown();
                    return;
            }
            
            // Determine who acts first (always the player in position)
            playerTurn = dealerPosition === 'PLAYER';
            
            // Start the betting round
            updateControls();
            
            if (!playerTurn) {
                setTimeout(aiAction, 1000);
            }
        }
        
        function showdown() {
            // Reveal AI cards
            const aiCardsContainer = document.querySelector('.ai-cards');
            aiCardsContainer.innerHTML = '';
            aiCards.forEach(card => {
                const cardEl = createCardElement(card);
                aiCardsContainer.appendChild(cardEl);
            });
            
            // Determine winner
            const winner = determineWinner();
            
            if (winner === 'PLAYER') {
                playerChips += pot;
                playerChipsEl.textContent = playerChips;
                showMessage('You win the pot!');
            } else if (winner === 'AI') {
                aiChips += pot;
                aiChipsEl.textContent = aiChips;
                showMessage('AI wins the pot!');
            } else {
                // Split pot
                const halfPot = Math.floor(pot / 2);
                playerChips += halfPot;
                aiChips += pot - halfPot; // Account for odd chip
                playerChipsEl.textContent = playerChips;
                aiChipsEl.textContent = aiChips;
                showMessage('Split pot!');
            }
            
            handInProgress = false;
            updateControls();
        }
        
        // Determine hand winner - simple for demo (randomly)
        function determineWinner() {
            // For this demo, we'll do a simplistic random winner
            // In a real game, we would evaluate poker hand strength
            
            // Create a simple representation of the hand strength (random for demo)
            const playerStrength = Math.random();
            const aiStrength = Math.random();
            
            if (playerStrength > aiStrength) {
                return 'PLAYER';
            } else if (aiStrength > playerStrength) {
                return 'AI';
            } else {
                return 'TIE';
            }
        }
        
        // AI logic
        function aiAction() {
            // Show thinking indicator
            aiThinkingEl.classList.remove('hidden');
            
            // Simulate AI "thinking"
            setTimeout(() => {
                aiThinkingEl.classList.add('hidden');
                
                // Simple AI logic - make decisions based on hand strength and game state
                const handStrength = evaluateAIHand();
                const amountToCall = currentBet - aiBet;
                
                if (amountToCall === 0) {
                    // No bet to call - can check or bet
                    if (handStrength < 0.3) {
                        // Weak hand - check
                        aiCheck();
                    } else if (handStrength < 0.7) {
                        // Medium hand - sometimes bet, sometimes check
                        if (Math.random() > 0.5) {
                            aiCheck();
                        } else {
                            const betAmount = Math.min(
                                Math.max(20, Math.floor(pot * 0.5)),
                                aiChips
                            );
                            aiPlaceBet(betAmount);
                        }
                    } else {
                        // Strong hand - bet
                        const betAmount = Math.min(
                            Math.max(20, Math.floor(pot * 0.75)),
                            aiChips
                        );
                        aiPlaceBet(betAmount);
                    }
                } else {
                    // There's a bet to call
                    if (handStrength < 0.2) {
                        // Very weak hand - fold
                        aiFold();
                    } else if (handStrength < 0.6) {
                        // Medium hand - call if affordable
                        if (amountToCall > aiChips / 2) {
                            aiFold();
                        } else {
                            aiCall();
                        }
                    } else {
                        // Strong hand - call or raise
                        if (Math.random() > 0.6 && aiChips > amountToCall * 3) {
                            // Raise
                            const raiseAmount = Math.min(
                                amountToCall * 2 + Math.floor(Math.random() * 20),
                                aiChips
                            );
                            aiPlaceBet(raiseAmount);
                        } else {
                            // Call
                            aiCall();
                        }
                    }
                }
                
                // Switch to player's turn
                playerTurn = true;
                updateControls();
                
            }, 1500); // Thinking delay
        }
        
        function evaluateAIHand() {
            // In a real implementation, this would analyze the cards
            // For this demo, return a random strength between 0 and 1
            // Higher values indicate stronger hands
            
            // Slight bias based on game phase - AI plays tighter early, looser later
            let baseProbability;
            switch (gamePhase) {
                case 'PREFLOP':
                    baseProbability = 0.3;
                    break;
                case 'FLOP':
                    baseProbability = 0.4;
                    break;
                case 'TURN':
                    baseProbability = 0.5;
                    break;
                case 'RIVER':
                    baseProbability = 0.6;
                    break;
                default:
                    baseProbability = 0.5;
            }
            
            return Math.random() * baseProbability + (1 - baseProbability) * Math.random();
        }
        
        function aiCheck() {
            showMessage('AI checks');
            checkBettingRound();
        }
        
        function aiCall() {
            const amountToCall = currentBet - aiBet;
            showMessage(`AI calls ${amountToCall}`);
            placeBet('AI', amountToCall);
            checkBettingRound();
        }
        
        function aiPlaceBet(amount) {
            const totalBet = amount + (currentBet - aiBet);
            showMessage(`AI bets ${totalBet}`);
            placeBet('AI', totalBet);
            currentBet = aiBet;
        }
        
        function aiFold() {
            showMessage('AI folds');
            playerChips += pot;
            playerChipsEl.textContent = playerChips;
            handInProgress = false;
            updateControls();
        }
        
        // Player actions
        function playerCheck() {
            showMessage('You check');
            playerTurn = false;
            checkBettingRound();
        }
        
        function playerCall() {
            const amountToCall = currentBet - playerBet;
            showMessage(`You call ${amountToCall}`);
            placeBet('PLAYER', amountToCall);
            playerTurn = false;
            checkBettingRound();
        }
        
        function playerBetAction() {
            const betAmount = parseInt(betAmountEl.textContent);
            const totalBet = betAmount + (currentBet - playerBet);
            showMessage(`You bet ${totalBet}`);
            placeBet('PLAYER', totalBet);
            currentBet = playerBet;
            playerTurn = false;
            setTimeout(aiAction, 1000);
        }
        
        function playerFold() {
            showMessage('You fold');
            aiChips += pot;
            aiChipsEl.textContent = aiChips;
            handInProgress = false;
            updateControls();
        }
        
        function checkBettingRound() {
            if (!playerTurn && playerBet === aiBet) {
                // Betting round complete
                setTimeout(() => {
                    nextPhase();
                }, 1000);
            } else if (!playerTurn) {
                // AI's turn
                setTimeout(aiAction, 1000);
            }
        }
        
        // UI updates
        function updateControls() {
            if (!handInProgress) {
                // No hand in progress - only new hand button enabled
                checkBtn.disabled = true;
                callBtn.disabled = true;
                betBtn.disabled = true;
                foldBtn.disabled = true;
                betSlider.disabled = true;
                newHandBtn.disabled = false;
                return;
            }
            
            // Hand in progress
            newHandBtn.disabled = true;
            
            if (!playerTurn) {
                // Not player's turn - disable all controls
                checkBtn.disabled = true;
                callBtn.disabled = true;
                betBtn.disabled = true;
                foldBtn.disabled = true;
                betSlider.disabled = true;
                return;
            }
            
            // Update bet slider
            const maxBet = playerChips;
            betSlider.max = maxBet;
            betSlider.value = Math.min(maxBet, currentBet * 2);
            betAmountEl.textContent = betSlider.value;
            
            // Check if player can check
            checkBtn.disabled = playerBet !== currentBet;
            
            // Call button enabled if there's a bet to call and player has chips
            const amountToCall = currentBet - playerBet;
            callBtn.disabled = amountToCall <= 0 || amountToCall > playerChips;
            
            // Bet button enabled if player has chips
            betBtn.disabled = playerChips <= 0;
            betSlider.disabled = playerChips <= 0;
            
            // Fold button only enabled if there's a bet to call
            foldBtn.disabled = amountToCall <= 0;
        }
        
        function showMessage(text) {
            messageEl.textContent = text;
            messageEl.classList.remove('hidden');
            
            setTimeout(() => {
                messageEl.classList.add('hidden');
            }, 2000);
        }
        
        // Event listeners
        checkBtn.addEventListener('click', playerCheck);
        callBtn.addEventListener('click', playerCall);
        betBtn.addEventListener('click', playerBetAction);
        foldBtn.addEventListener('click', playerFold);
        newHandBtn.addEventListener('click', initGame);
        
        betSlider.addEventListener('input', function() {
            betAmountEl.textContent = this.value;
        });
        
        // Initialize the game
        updateControls();
    </script>
</body>
</html>
